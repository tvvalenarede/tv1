<!DOCTYPE html>
<html>
<head>
    <title>Gorillas JS</title>
    <style>
        canvas {
            border: 1px solid black;
            background: #87CEEB;
        }
        .controls {
            margin: 10px;
            padding: 10px;
        }
    </style>
</head>
<body>
    <div class="controls">
        Ângulo: <input type="number" id="angle" min="0" max="90" value="45">°
        Velocidade: <input type="number" id="velocity" min="1" max="100" value="50">
        <button onclick="fire()">Lançar Banana!</button>
    </div>
    <canvas id="gameCanvas" width="800" height="400"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const GRAVITY = 0.3;
        const EXPLOSION_RADIUS = 20;
        
        let terrain = [];
        let players = [
            {x: 50, y: 0, score: 0},
            {x: 750, y: 0, score: 0}
        ];
        
        let currentPlayer = 0;
        let projectile = null;
        let wind = Math.random() * 6 - 3;

        function generateTerrain() {
            terrain = new Array(canvas.width).fill(canvas.height - 50);
            let height = canvas.height - 50;
            let displacement = 100;
            
            terrain[0] = height;
            terrain[canvas.width - 1] = height;
            
            for(let step = canvas.width - 1; step > 1; step = Math.floor(step / 2)) {
                for(let i = 0; i < canvas.width - 1; i += step) {
                    let mid = i + Math.floor(step / 2);
                    terrain[mid] = (terrain[i] + terrain[i + step]) / 2 + (Math.random() * displacement * 2 - displacement);
                }
                displacement *= 0.5;
            }

            players[0].y = terrain[players[0].x] - 20;
            players[1].y = terrain[players[1].x] - 20;
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Desenhar terreno
            ctx.beginPath();
            ctx.moveTo(0, canvas.height);
            for(let x = 0; x < canvas.width; x++) {
                ctx.lineTo(x, terrain[x]);
            }
            ctx.lineTo(canvas.width, canvas.height);
            ctx.fillStyle = '#4a3728';
            ctx.fill();
            
            // Desenhar gorilas e nomes
            players.forEach((player, index) => {
                // Corpo
                ctx.beginPath();
                ctx.arc(player.x, player.y, 20, 0, Math.PI * 2);
                ctx.fillStyle = index === 0 ? 'blue' : 'red';
                ctx.fill();
                
                // Cabeça
                ctx.beginPath();
                ctx.arc(player.x, player.y - 25, 15, 0, Math.PI * 2);
                ctx.fillStyle = 'saddlebrown';
                ctx.fill();
                
                // Nomes dos jogadores
                ctx.save();
                ctx.fillStyle = 'black';
                ctx.font = '16px Arial';
                ctx.textAlign = 'center';
                if(index === 0) {
                    ctx.fillText("Cleiton Bonani", player.x, player.y - 40);
                } else {
                    ctx.fillText("André Bonani", player.x, player.y - 40);
                }
                ctx.restore();
            });
            
            // Desenhar banana
            if(projectile) {
                ctx.beginPath();
                ctx.arc(projectile.x, projectile.y, 5, 0, Math.PI * 2);
                ctx.fillStyle = 'yellow';
                ctx.fill();
            }
            
            // Desenhar informações
            ctx.fillStyle = 'black';
            ctx.font = '16px Arial';
            ctx.fillText(`Vento: ${wind.toFixed(1)} m/s`, 10, 20);
            ctx.fillText(`Jogador ${currentPlayer + 1}`, 10, 40);
        }

        // Restante do código permanece igual...
        function fire() {
            const angle = document.getElementById('angle').value * Math.PI / 180;
            const velocity = document.getElementById('velocity').value;
            
            projectile = {
                x: players[currentPlayer].x,
                y: players[currentPlayer].y - 25,
                vx: Math.cos(angle) * (velocity / 2) + (wind / 10),
                vy: -Math.sin(angle) * (velocity / 2)
            };
            
            animate();
        }

        function animate() {
            if(!projectile) return;
            
            projectile.x += projectile.vx;
            projectile.y += projectile.vy;
            projectile.vy += GRAVITY;
            
            if(projectile.x >= 0 && projectile.x < canvas.width) {
                const terrainHeight = terrain[Math.floor(projectile.x)];
                if(projectile.y >= terrainHeight) {
                    explode(projectile.x, projectile.y);
                    projectile = null;
                    return;
                }
            }
            
            players.forEach((player, index) => {
                const dx = projectile.x - player.x;
                const dy = projectile.y - (player.y - 25);
                if(Math.sqrt(dx*dx + dy*dy) < 20) {
                    alert(`Jogador ${currentPlayer + 1} venceu!`);
                    generateTerrain();
                    draw();
                    projectile = null;
                    return;
                }
            });
            
            if(projectile.y > canvas.height) {
                projectile = null;
                currentPlayer = (currentPlayer + 1) % 2;
                wind = Math.random() * 6 - 3;
                draw();
                return;
            }
            
            draw();
            requestAnimationFrame(animate);
        }

        function explode(x, y) {
            for(let i = x - EXPLOSION_RADIUS; i < x + EXPLOSION_RADIUS; i++) {
                if(i < 0 || i >= canvas.width) continue;
                const dx = i - x;
                const dy = Math.sqrt(EXPLOSION_RADIUS**2 - dx**2);
                terrain[i] = Math.min(terrain[i], y + dy);
            }
            
            currentPlayer = (currentPlayer + 1) % 2;
            draw();
        }

        generateTerrain();
        draw();
    </script>
</body>
</html>
